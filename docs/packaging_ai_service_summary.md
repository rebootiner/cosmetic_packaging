# 화장품 용기 포장 최적화 AI 서비스 정리

작성일: 2026-02-07 (UTC)

## 0) 고객 요구사항 요약

고객이 원하는 서비스는 다음과 같습니다.

- 입력:
  - 제품 형상 데이터: 3D 도면(STP/CAD) 또는 2D 치수 이미지
  - 박스 규격: 국내용/수출용 등 사전 정의된 박스
  - 포장재 정보: 지퍼백, 비닐, 발포지, 트레이, 박스류(사전 등록)
- 출력:
  - 포장 방식 추천(벌크/정렬/물결/트레이 등)
  - 방식별 적재 수량(최대 적재 개수)
  - 배열/적재 정보
  - 3D 시각화 결과
  - 엑셀 포장사양서(기존 양식 빈칸 자동 입력)

핵심 목표는 "정해진 박스에 어떤 방식으로 얼마나 들어가는지"를 예측하고,
단일 정답이 아니라 2~3개의 추천안을 제시하는 것입니다.

---

## 1) 전체 접근 전략 (상위 구조)

본 서비스는 **AI + 최적화 엔진 + 시각화/문서화** 3축으로 구성하는 것이 적합합니다.

1. 입력 표준화 계층
   - 다양한 입력(STP/2D 이미지/수기 치수)을 공통 형상 데이터로 통합
2. 적재 최적화 계층
   - 포장 방식별 배치 시뮬레이션 및 수량/효율 계산
3. 결과 소비 계층
   - 3D 확인, 비교, 엑셀/리포트 출력

> 설계 원칙: 핵심 계산(충돌/적재수량)은 deterministic 엔진이 담당하고,
> AI는 입력 해석 보조, 전략 추천, 설명, 문서자동화에 집중합니다.

---

## 2) 3단계 상세 정리

## 2-1) 1단계: 제품 형상 파악/구성

### 목적
입력 포맷이 달라도 적재 알고리즘이 사용할 수 있는 "공통 형상 표현" 생성

### 권장 방식

- STP/CAD 입력(우선순위 1)
  - B-Rep 파싱 → 메쉬 변환 → 치수/체적/외곽 특성 추출
  - 정확도 가장 높고 재현성 우수

- 2D 도면/치수 이미지 입력
  - OCR + 선/윤곽 검출 → 치수 추출
  - 파라메트릭 규칙(extrude/revolve) 기반 3D 근사 생성

- 사진 입력(보조 모드)
  - 세그멘테이션 + 스케일 기반 근사
  - 정확 CAD 수준보다는 "적재 계산용 근사 모델"로 활용

### 1단계 출력(권장)

- JSON(필수): 계산용 수치 데이터
  - 외곽 치수, 체적, 허용 회전, 취약면, 이격거리, 신뢰도/오차 등
- Mesh(STL/GLB, 선택): 시각 검토/3D 렌더링용

> 핵심: 계산용(JSON)과 보기용(3D 모델) 분리

---

## 2-2) 2단계: 규격 상자 내 최대 적재 알고리즘

### 문제 정의
3D Bin Packing + 제약조건 최적화

- 목표: 적재 수량 최대화
- 제약: 박스 경계, 충돌 없음, 회전 허용 조건, 최소 간격, 안정성

### 계산 방식
단일 알고리즘이 아니라 "후보 생성 + 검증 + 개선" 조합이 적합

1. 후보 생성(포장 패턴별)
   - 정렬(Grid), 벽돌형/지그재그, 층별 교차 회전, 물결, 트레이 슬롯

2. 회전 탐색
   - 연속 회전이 아닌 허용 각도 집합(예: 0/90/180/270) 중심

3. 충돌/적합성 검증
   - 빠른 검사(AABB/OBB) + 정밀 검사(SAT/GJK 계열)

4. 최적화 개선
   - 휴리스틱 초기해(FFD, BLB) + 메타휴리스틱(GA/SA/Tabu)

5. 점수화(멀티목표)
   - 수량, 공간활용률, 작업성, 파손리스크 등을 함께 평가

### 2단계 출력
- 추천안 A/B/C(2~3개)
  - 각 안의 적재수량, 배열좌표, 포장방식, 장단점

---

## 2-3) 3단계: 3D 시뮬레이션 및 결과 제공

### 목적
계산 결과를 현업이 "보고 검토"할 수 있도록 시각화

### 기술 권장
- 웹 기반 3D 렌더링: Three.js (또는 React + react-three-fiber)
- 데이터 전달: 적재 결과 JSON(좌표/회전/레이어/충돌 정보)
- 파일 포맷: glTF/GLB 권장

### 제공 기능
- 박스 반투명 표시
- 층별 색상 구분
- 충돌/간섭 하이라이트
- 적재 순서 애니메이션
- 회전/줌/단면 보기

### 산출물
- 웹 결과 화면
- 이미지/PDF 리포트
- 엑셀 사양서 자동 입력 파일

---

## 3) 최종 프로덕트 형태 제안

## 웹서비스(SaaS) 형태로 통합 제공

- 입력: 업로드 + 제약 설정
- 계산: 서버 최적화 엔진
- 출력: 웹 3D 결과 + 추천안 비교 + 엑셀 자동 작성

### 웹으로 가능한가?
가능합니다.
다만 무거운 형상 처리/최적화는 서버에서 수행하고,
브라우저는 시각화/검토/다운로드 중심으로 구성하는 것이 적합합니다.

---

## 4) 단계별 구현 우선순위(MVP 제안)

1. STP + 기본 치수 입력 우선 지원
2. 정렬/벌크 중심 최적화 먼저 구현
3. 3D 뷰어 + 엑셀 자동기입 연결
4. 이후 물결/트레이 고도화 및 입력 확장(2D/사진)

이 순서가 정확도와 개발속도, 현업 적용성을 균형 있게 맞출 수 있는 경로입니다.
